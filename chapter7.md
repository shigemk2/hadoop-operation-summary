# 7. リソース管理
## 7-1 リソース管理とは

有限であるリソースをあるユーザー、グループ、ジョブに割り当てる寮を制御すること

HadoopについていえばHDFSでのディスクの領域の消費量とファイル数、MapReduceでのmapとreduceのスロットの利用状況を気にしないといけない

## 7-2 HDFSのクオータ

HDFSはディスク領域の使用量にたいするクォータという概念をサポート

- HDFSのファイルの物理サイズ、ディレクトリのサイズの上限を指定できる
- クォータnお監査の行われ方について、クォータの残りに対して書き込まれるバイトを評価するのは難しい
- ブロックが割り当てられたらその中身はすべて使い切られると考える
- クォータの指定はブロックサイズの倍数で行うのが妥当
- ディレクトリ内に作成できるファイル数に対するクォータをサポート

## 7-3 MapReduceのスケジューラ

- 有限であるもの
    - クラスタの演算容量
        - ワーカーノード
            - CPU
            - メモリ
            - ネットワーク帯域
            - ディスク/O

- これらのリソースをmap/reduceのタスクおスロットという形で表現。タスクスロットはシステムリソースの代理
- スロットも並行に実行されているジョブの間で共有
- ジョブトラッカー内でのプラグインであるスケジューラがタスクトラッカーの空きスロットへのタスクの割当を受け持つコンポーネント
- ジョブ内のタスクの実行順序が常に変更されうる

- スケジューラーの種類
    - FIFOスケジューラー
        - デフォルト
        - 最初に入ったものが最初に処理される
    - フェアスケジューラー
        - 別名 FSスケジューラー
        - リソースのスケジューリングと割当のフレームワークを提供
        - プリエンプション
    - キャパシティスケジューラー
        - フェアスケジューラーよりも単純
        - ひとつ以上のキューを定義し、それぞれにキャパシティ、つまりクラスタの全スロット容量の一部を決めて持たせる

http://software.fujitsu.com/jp/manual/manualfiles/m150005/j2ul1563/04z200/j1563-03-17-05-02.html

リソースの追跡とリソースのクラスタユーザーへの割り当てられ方についての改善の研究が進められている。
YARN内のコンテナーの中で複数のMapReduceのインスタンスが動作し、1つのHDFSのインスタンスを共有するのがHadoopの将来像
