# クラスタのメンテナンス

クラスタを健全で適切な動作状態に保つにはそれなりの量の面倒を毎日見ないといけない

- クラスタの拡張
- 障害やエラーを起こしたジョブへの対応
- ログの管理
- 実働環境でのソフトウエアのアップグレード

## 8-1 Hadoopのプロセス群の管理

- デーモン群の起動、停止、 再起動

- Hadoop再起動の理由
    - 設定の変更
    - アップグレード
    - ワーカーノードの追加削除
    - インシデントの対応

`ps -ef | grep process`

### 手動によるプロセスの起動と停止

- プロセスを実行するユーザー
- hadoop processを使ってプロセスを起動

## 8-2 HDFSのメンテナンス作業

- データノードの追加(dfs.hostsの追加など)
- データノードの脱退(dfs.hosts.excludeの追加など)

- fsckによるファイルシステムの整合性チェック
- HDFSのブロックデータのバランシング
- ディスク障害への対応

障害対応手段

+ Hadoop関連のプロセスをすべて停止する
+ 障害の起きたディスクをすべて交換する
+ クラスタへ再度ノードを追加する手段を踏む
+ Hadoopのfsckユーティリティを実行して、HDFSの健全性を確認
